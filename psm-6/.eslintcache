[{"/Users/hamboomger/work/uni/psm/psm-6/src/index.tsx":"1","/Users/hamboomger/work/uni/psm/psm-6/src/reportWebVitals.ts":"2","/Users/hamboomger/work/uni/psm/psm-6/src/App.tsx":"3","/Users/hamboomger/work/uni/psm/psm-6/src/components/StartButton.tsx":"4","/Users/hamboomger/work/uni/psm/psm-6/src/lib/pendulumFunctions.ts":"5","/Users/hamboomger/work/uni/psm/psm-6/src/lib/AppState.ts":"6","/Users/hamboomger/work/uni/psm/psm-6/src/lib/config.ts":"7","/Users/hamboomger/work/uni/psm/psm-6/src/components/animation/Pendulum.tsx":"8","/Users/hamboomger/work/uni/psm/psm-6/src/components/plot/PhaseSpacePlot.tsx":"9","/Users/hamboomger/work/uni/psm/psm-6/src/lib/util.ts":"10","/Users/hamboomger/work/uni/psm/psm-6/src/components/plot/D3PlotBuilder.ts":"11","/Users/hamboomger/work/uni/psm/psm-6/src/lib/PSDSubscriberImpl.ts":"12","/Users/hamboomger/work/uni/psm/psm-6/src/lib/PhaseSpaceDataObservable.ts":"13"},{"size":528,"mtime":1611596060348,"results":"14","hashOfConfig":"15"},{"size":425,"mtime":1612116094332,"results":"16","hashOfConfig":"15"},{"size":1002,"mtime":1612969731381,"results":"17","hashOfConfig":"15"},{"size":1327,"mtime":1612712205471,"results":"18","hashOfConfig":"15"},{"size":2132,"mtime":1612713122637,"results":"19","hashOfConfig":"15"},{"size":821,"mtime":1612969731363,"results":"20","hashOfConfig":"15"},{"size":86,"mtime":1612713122651,"results":"21","hashOfConfig":"15"},{"size":4001,"mtime":1612969769137,"results":"22","hashOfConfig":"15"},{"size":1413,"mtime":1612969769127,"results":"23","hashOfConfig":"15"},{"size":167,"mtime":1612711664041,"results":"24","hashOfConfig":"15"},{"size":3895,"mtime":1612970395839,"results":"25","hashOfConfig":"15"},{"size":1900,"mtime":1612970518975,"results":"26","hashOfConfig":"15"},{"size":1658,"mtime":1612969509717,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"nicvw5",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/Users/hamboomger/work/uni/psm/psm-6/src/index.tsx",[],["56","57"],"/Users/hamboomger/work/uni/psm/psm-6/src/reportWebVitals.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/App.tsx",[],"/Users/hamboomger/work/uni/psm/psm-6/src/components/StartButton.tsx",[],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/pendulumFunctions.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/AppState.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/config.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/components/animation/Pendulum.tsx",["58","59"],"import _ from 'lodash';\nimport React, {useEffect, useRef, useState} from \"react\";\nimport {Circle, Line} from \"react-konva\";\nimport Konva from \"konva\";\nimport {pendulum, Vector} from \"../../lib/pendulumFunctions\";\nimport {AppParametersStore, PendulumStore} from \"../../lib/AppState\";\nimport {precision} from \"../../lib/util\";\nimport {PSData, PSDSubscriberImpl} from \"../../lib/PSDSubscriberImpl\";\nimport {PhaseSpaceDataObservable} from \"../../lib/PhaseSpaceDataObservable\";\n\nfunction startAnimation(newPendCoords: Vector, pivotCoords: Vector) {\n  PendulumStore.update(s => {\n    s.animationStarted = true;\n    s.pendCoords = newPendCoords;\n    const sLength = pendulum.getStringLength(pivotCoords, newPendCoords);\n    const theta = pendulum.theta(pivotCoords, newPendCoords, 'rad');\n    s.motionObservable = new PhaseSpaceDataObservable(theta, sLength);\n  })\n}\n\nconst Pendulum: React.FC = () => {\n  const circleRef = useRef<Konva.Circle>(null);\n  const lineRef = useRef<Konva.Line>(null);\n\n  const {pivotCoords, pendCoords, animationStarted, motionObservable} = PendulumStore.useState();\n  const [pendX, pendY] = [circleRef.current?.x() ?? pendCoords[0], circleRef.current?.y() ?? pendCoords[1]];\n  const params = AppParametersStore.useState();\n\n  const [konvaAnimation, setKonvaAnimation] = useState<Konva.Animation | undefined>();\n  const [psdSub, setPSDSub] = useState<PSDSubscriberImpl>();\n  const [psData, setPSData] = useState<PSData>();\n\n  useEffect(() => {\n    if (animationStarted && motionObservable) {\n      const newPSDSub = new PSDSubscriberImpl(setPSData);\n      setPSDSub(newPSDSub);\n      motionObservable.subscribe(newPSDSub);\n      motionObservable.startCalculations(params, 1000);\n    }\n  }, [animationStarted, motionObservable]);\n\n  useEffect(() => {\n    // console.log(`PSData keys: ${JSON.stringify(Object.keys(psData ?? {}))}`);\n  }, [psData])\n\n  useEffect(() => {\n    if (animationStarted && psData && psdSub && !konvaAnimation) {\n      const circle = circleRef.current!;\n      const line = lineRef.current!;\n      const konvaAnimation = new Konva.Animation((frame => {\n        const {time, frameRate} = frame!;\n\n        const roundedTime = _.round(time/100, precision(params.dt));\n        const realPsData = psdSub.entireDataCache;\n        if (!realPsData[roundedTime+'']) {\n          console.log(`Can't find the rounded time of ${roundedTime}!`);\n          console.log(`PSData # of keys: ${Object.keys(realPsData).length}`);\n        } else {\n          const [theta,] = realPsData[roundedTime+''];\n          const sLength = pendulum.getStringLength(pivotCoords, pendCoords);\n          const newCoords = pendulum.getCoords(pivotCoords, theta * 180 / Math.PI, sLength);\n          circle.move({x: newCoords[0] - circle.x(), y: newCoords[1] - circle.y()});\n          line.points([pivotCoords[0], pivotCoords[1], circle.x(), circle.y()]);\n        }\n      }));\n      setKonvaAnimation(konvaAnimation);\n      konvaAnimation.addLayer(circleRef.current?.getLayer());\n      konvaAnimation.start();\n    }\n    if (!animationStarted && konvaAnimation) {\n      konvaAnimation.stop();\n      setKonvaAnimation(undefined);\n    } else if (animationStarted && konvaAnimation) {\n      konvaAnimation.start();\n    }\n  }, [animationStarted, konvaAnimation, psData, psdSub])\n  return (\n    <>\n      <Line\n        stroke=\"black\"\n        points={[pivotCoords[0], pivotCoords[1], pendX, pendY]}\n        ref={lineRef}\n      />\n      <Circle\n        stroke=\"black\"\n        strokeWidth={1}\n        fill=\"#3af\"\n        x={pendX}\n        y={pendY}\n        radius={20}\n        ref={circleRef}\n        draggable={true}\n        onDragMove={(e) => lineRef.current?.points([pivotCoords[0], pivotCoords[1], e.target.x(), e.target.y()])}\n        onDragStart={() => PendulumStore.update(s => { s.animationStarted = false })}\n        onDragEnd={(e) => startAnimation([e.target.x(), e.target.y()], pivotCoords)}\n      />\n    </>\n  )\n}\n\nexport default Pendulum;\n","/Users/hamboomger/work/uni/psm/psm-6/src/components/plot/PhaseSpacePlot.tsx",["60","61"],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/util.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/components/plot/D3PlotBuilder.ts",["62","63","64"],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/PSDSubscriberImpl.ts",[],"/Users/hamboomger/work/uni/psm/psm-6/src/lib/PhaseSpaceDataObservable.ts",[],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":22,"column":10,"nodeType":"71","messageId":"72","endLine":22,"endColumn":27},{"ruleId":"69","severity":1,"message":"73","line":86,"column":22,"nodeType":"71","messageId":"72","endLine":86,"endColumn":31},{"ruleId":"69","severity":1,"message":"74","line":13,"column":41,"nodeType":"71","messageId":"72","endLine":13,"endColumn":52},{"ruleId":"69","severity":1,"message":"75","line":14,"column":9,"nodeType":"71","messageId":"72","endLine":14,"endColumn":15},{"ruleId":"69","severity":1,"message":"76","line":1,"column":8,"nodeType":"71","messageId":"72","endLine":1,"endColumn":9},{"ruleId":"69","severity":1,"message":"77","line":81,"column":11,"nodeType":"71","messageId":"72","endLine":81,"endColumn":17},{"ruleId":"69","severity":1,"message":"78","line":82,"column":11,"nodeType":"71","messageId":"72","endLine":82,"endColumn":17},"no-native-reassign",["79"],"no-negated-in-lhs",["80"],"@typescript-eslint/no-unused-vars","'roughSizeOfObject' is defined but never used.","Identifier","unusedVar","'frameRate' is assigned a value but never used.","'pivotCoords' is assigned a value but never used.","'params' is assigned a value but never used.","'_' is defined but never used.","'xValue' is assigned a value but never used.","'yValue' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]